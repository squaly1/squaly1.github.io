<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>群晖使用truenas储存做储存空间</title>
      <link href="/post/30000.html"/>
      <url>/post/30000.html</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>玩黑群已经有10年左右了，从n54l就开始折腾，随着时间的增加和硬件的不断更换，渐渐觉得黑群不是一个长久使用的方案，原因是，黑群的版本对硬件限制越来越麻烦，例如：网卡驱动，阵列卡不识别，m2不能做储存空间等，最麻烦的是居然不能支持部分hba卡，（例如：戴尔的h330，除非刷直通模式，但风险极大，容易砖）以上种种问题都有方法解决，如果你要换硬件首先要考虑引导能不能驱动，但在你安装新硬件之前是几乎完全不知道能否驱动成功的。</p><p>第2要考虑的是，群晖的文件系统恢复不是一般的麻烦，在其他系统读取文件很困难，如果文件多恢复到一半出现错误真的一点心情都没有。</p><p>现在主要用的是docker的服务，除了photos其他都有代替方案，photos的客户端方便些。</p><p>truenas作为一个免费的操作系统，升级方便，对硬件支持好，而且zfs有很大的优势，于是用truenas代替群晖的储存功能是一个不错的选择，储存和服务分离是大势所趋，不会因为群晖升级失败或新硬件识别不了等问题导致数据读取不了。</p><p>群晖用来跑服务，但nfs共享文件夹不能放套件和homes文件，于是有了以下方法。</p><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><h3 id="1-1-nfs设置"><a href="#1-1-nfs设置" class="headerlink" title="1.1 nfs设置"></a>1.1 nfs设置</h3><p>在truenas部署好硬盘和数据集后，开启nfs，并设置好权限，复制数据集地址</p><p><img src="https://app.bliyun.me:8099/img/2023/10/14/65298f0caebbe.jpg" alt="nfs权限"></p><h3 id="1-2-esxi挂载nfs"><a href="#1-2-esxi挂载nfs" class="headerlink" title="1.2 esxi挂载nfs"></a>1.2 esxi挂载nfs</h3><p>来到esxi填上简单的配置信息</p><p><img src="https://app.bliyun.me:8099/img/2023/10/14/6529900cad30f.jpg" alt="esxi设置"></p><h3 id="1-3-虚拟机设置"><a href="#1-3-虚拟机设置" class="headerlink" title="1.3 虚拟机设置"></a>1.3 虚拟机设置</h3><p>虚拟机设置增加上truenas的nfs硬盘，容量随意，按照自己的习惯填写，一般上放些文件和相片</p><p><img src="https://app.bliyun.me:8099/img/2023/10/14/652990e5f2d84.jpg" alt="虚拟机设置"></p><h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>在群晖新建储存空间就可以正常使用了，群晖识别不出是虚拟硬盘，可以正常的存放套件或做homes目录，这里不建议大家把qbttorrent放到truenas的文件夹，pt会产生大量的碎片，对阵列影响很大，建议用m2做储存空间给群晖pt，保险起见qbttorrent也安装在m2，pt时候会产生缓存文件。</p><p><b>enjoy～！</b></p>]]></content>
      
      
      
        <tags>
            
            <tag> 群晖 truenas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nastools文件夹同步正确设置</title>
      <link href="/post/31699.html"/>
      <url>/post/31699.html</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>nastools最烦的是文件夹同步的设置，刚刚开始时被网上的教程看到一头雾水，什么不能分不同硬盘，必须这只link目录等都是误导，只需要简单的设置两个目录，一个是下载目录，一个是保存目录（也可以做硬链接），docker映射的时候不要直接映射根目录，docker会认为是跨盘，就算是跨盘映射二级或下面目录也可以正常使用。</p><h2 id="docker设置"><a href="#docker设置" class="headerlink" title="docker设置"></a>docker设置</h2><p><img src="https://app.bliyun.me:8099/img/2023/10/10/65252015e87d0.jpg" alt="docker文件夹映射"></p><p>和qbittorrent的文件映射目录必须完全一样，因为下载完的时候nastools复制&#x2F;转移&#x2F;硬链接等需要发送docker的实际路径。如果qbittorrent的映射路径不一致，会导致复制出错，找不到下载地址，路径不存在等奇怪问题（别问我怎么知道的）。</p><p>up主的media目录为群晖内的电影下载目录，truenas目录是在pt文件夹下nfs映射的目录，实测跨盘跨设备正常运行，做好映射路径就可以了，就是右边的&#x2F;vedio，&#x2F;medio目录，docker只认出右边的路径，不会知道跨盘跨设备。</p><p><img src="https://app.bliyun.me:8099/img/2023/10/10/6525227739260.jpg" alt="目录同步"></p><p>目录同步，左边是下载目录，右边是保存目录，有不需要nastool识别的文件夹，例如学习资料，记得把识别重命名关闭掉。</p><p><img src="https://app.bliyun.me:8099/img/2023/10/10/6525231d01a56.jpg" alt="基础设置"></p><p>基础设置，关闭下载软件监控。</p><p><img src="https://app.bliyun.me:8099/img/2023/10/12/65273fb9465fa.jpg" alt="下载目录"></p><p>下载器-下载目录配置，nastool下载的时候会在qbttorrent推送存储目录，如果这里设置错就会储存在错误地址，切记！</p><p>qbttorrent设置，docker映射的路径和nastool一致</p><p><img src="https://app.bliyun.me:8099/img/2023/10/12/65274143713ec.jpg" alt="设置"></p><p>为了避免nastool同步未完成的文件，请勾上：不完整文件扩展名，默认路径和未完成的文件看个人需要添加。</p><p><img src="https://app.bliyun.me:8099/img/2023/10/12/65274205a4ec4.jpg" alt="分类"></p><p>最好记得右键分类的全部，添加相应的分类名和路径。</p><p>enjoy～～～！</p><p>安装教程一大堆，都是讲一半不讲一半，只好自己摸索，解决问题。nastool记得下载2.91或2.90，别下载新版本，需要bt认证，老版本功能够用了，这些批处理命令不需要更新花巧功能，最后谢谢作者的付出。</p>]]></content>
      
      
      
        <tags>
            
            <tag> nastool truenas 群晖 qbittorrent </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>truenas使用nfs传输I/O堵塞踩坑</title>
      <link href="/post/undefined.html"/>
      <url>/post/undefined.html</url>
      
        <content type="html"><![CDATA[<p>宿主系统esxi虚拟了truenas并用nfs协议共享给群晖用来存放电影之类的文件，复制文件的时候经常发现I/O堵塞，<br>具体表现为复制文件时速度慢，而且经常无法响应，用imac的nfs链接truenas也出现同样的情况，<br>最初以为是nfs的权限问题，把权限重新设置一遍后情况如故，<br>最后发现传输文件的时候，truenas的cpu占用非常高，<br>怀疑是分配8个虚拟cpu不够，索性分配40个虚拟cpu，每插槽10个，插槽数4，终于解决了。<br>安装的版本是<b>TrueNAS_SCALE</b>，按照教程安装的时候客户机操作系统系统选择了freebsd，发现esxi报警告，应该选择<font color=red>debain</font>系统，<br>各位记住这个坑：<b>core</b>版本选择freebsd，<b>SCALE</b>版本请选择<font color=red>debain</font>，免得又要重装，郁闷，<br>网上这些教程真的不负责任，写一半不写一半，或者写教程的人本身也不太懂，增加了我们学习成本。</p>]]></content>
      
      
      
        <tags>
            
            <tag> truenas nfs 群晖 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>openclash订阅链接踩坑记</title>
      <link href="/post/52816.html"/>
      <url>/post/52816.html</url>
      
        <content type="html"><![CDATA[<p>最近的机场老是出问题，于是换了个机场，发现订阅老是失败，具体表现为，可以下载配置文件，配置文件检测通过，但是就是无法，提示内核出错，具体请查看配置文件，查看日志发现读取不了自定义的附加规则导致，把附加的规则去掉后成功订阅，排除了几个小时，真坑。</p>]]></content>
      
      
      
        <tags>
            
            <tag> openclash openwrt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决openwrt内网间歇性无法域名访问nas问题</title>
      <link href="/post/49345.html"/>
      <url>/post/49345.html</url>
      
        <content type="html"><![CDATA[<p>一秒钟切底解决内网域名访问问题</p><p>使用双软路由经常会出现域名访问内网的环路问题，具体情况是域名可以ping通ip但是却间歇性不能访问，遇到这种问题只需要在：<h4>openwrt-网络</h4>，主机名：域名 ip地址：内网转发的ip（通常为群晖ip），设置完清除浏览器缓存或用无痕模式测试即可。</p>]]></content>
      
      
      
        <tags>
            
            <tag> openwrt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo进阶设置</title>
      <link href="/post/60403.html"/>
      <url>/post/60403.html</url>
      
        <content type="html"><![CDATA[<h3><p>除了学习markdown还有好多东西折腾，今天设置完评论功能，和域名绑定，又要准备部署图传到github了，<br>虽然本地群晖可以搭建图床，可是搭配typora还是不够方便，访问速度也变慢了，<br>反正要翻墙的，索性搭建在github吧hexo当日记使用挺好，<br>很满意hexo但markdown不知要背到什么时候55555～～～～</p></h3>]]></content>
      
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的第一篇博客</title>
      <link href="/post/63785.html"/>
      <url>/post/63785.html</url>
      
        <content type="html"><![CDATA[<p>从phpdms，discuz，wordpress到hexo，hexo感觉真不错，借助githu做文件存储，连服务器都不用买了，支持markdown语法，自由的写作方式，无需借助文本编辑器了，唯一缺点是需要学习markdown。<br>  以后再化时间记住markdown语法，无需备案，实名，审核的感觉真好，回到了10几年前建网站的快乐时代。<br>  感谢github大学，各种免费开源的项目，hexo的轻便博客无需数据库php，纯静态页面，愉快的玩耍吧。<p/>  ]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/post/16107.html"/>
      <url>/post/16107.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
